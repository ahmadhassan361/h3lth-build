"use strict";(self.webpackChunkacadify_saas_frontend=self.webpackChunkacadify_saas_frontend||[]).push([[105],{5105:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var a=n(5861),s=n(885),r=n(7757),o=n.n(r),c=n(2791),l=n(4569),i=n.n(l),d=n(184);var u=function(){var e,t,n,r,l,u=(0,c.useState)(""),v=(0,s.Z)(u,2),h=v[0],m=v[1],p=(0,c.useState)([]),f=(0,s.Z)(p,2),x=f[0],g=f[1],_=(0,c.useState)(""),j=(0,s.Z)(_,2),N=j[0],w=j[1],b=(0,c.useState)(!1),y=(0,s.Z)(b,2),k=y[0],q=y[1],S=(0,c.useState)(""),Z=(0,s.Z)(S,2),I=Z[0],E=Z[1],C=(0,c.useState)(""),P=(0,s.Z)(C,2),O=P[0],R=P[1];(0,c.useEffect)((function(){var e=localStorage.getItem("userId"),t=localStorage.getItem("chatdetail"),n=parseInt(e),a=JSON.parse(t);E(n),R(a)}),[]),console.log("gettingchatdataparsenew",O);var T=function(){var e=(0,a.Z)(o().mark((function e(){var t,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,n={userId:I,chat:null===O||void 0===O?void 0:O.request_chat_id,doctor:null===O||void 0===O||null===(t=O.request)||void 0===t?void 0:t.doctors[0],doctor_question:h,response_type:"doctor"},e.next=5,i().post("https://api.backend.h3lth.net/doctor-chat/api/thread/doctorpost",n);case 5:a=e.sent,console.log("Response from server:",a.data),w(a.data),m(""),q(!1),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(1),console.error("Error making POST request:",e.t0.message),q(!1);case 16:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();return(0,c.useEffect)((function(){var e=function(){var e=(0,a.Z)(o().mark((function e(){var t,n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i().get("https://api.backend.h3lth.net/doctor-chat/api/thread/doctorget?chatId=".concat(null===O||void 0===O?void 0:O.request_chat_id,"&doctor=").concat(null===O||void 0===O||null===(t=O.request)||void 0===t?void 0:t.doctors[0]));case 3:n=e.sent,console.log("Response from server:",n.data.data),g(n.data.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error("Error making GET request:",e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();e();var t=setInterval((function(){e()}),2e3);return function(){return clearInterval(t)}}),[N,null===O||void 0===O||null===(e=O.request)||void 0===e?void 0:e.doctors[0],null===O||void 0===O?void 0:O.request_chat_id]),console.log("chatresponsedata",x),(0,d.jsx)("div",{className:"col-md-12 background_chat_main",children:(0,d.jsx)("div",{className:"row px-3 py-4",children:(0,d.jsxs)("div",{className:"col-md-12 height_of_chat2",children:[(0,d.jsx)("div",{className:"col-md-12 background_chat_head",children:(0,d.jsx)("div",{className:"col-md-12 py-2",children:(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-1 px-0",children:(0,d.jsx)("img",{className:"img-fluid rounded-circle  img_height_width",src:"/images/avatar.webp"})}),(0,d.jsxs)("div",{className:"col-md-9 pt-4 px-0",children:[" ",(0,d.jsxs)("p",{className:"m-0 p-0 name_person",children:[" ",null===O||void 0===O||null===(t=O.request)||void 0===t||null===(n=t.request)||void 0===n||null===(r=n.mainuser)||void 0===r||null===(l=r.user)||void 0===l?void 0:l.name," "]})]})]})})}),(0,d.jsx)("div",{className:"col-md-12 height_of_msg py-4 px-0",id:"style-3",children:null===x||void 0===x?void 0:x.map((function(e,t){return console.log("indexx12",e),(0,d.jsxs)(d.Fragment,{children:[(null===e||void 0===e?void 0:e.patient_answer)&&(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6",children:(0,d.jsx)("h6",{className:"mt-2 bg-white px-3 py-2 rounded-pill",children:e.patient_answer})}),(0,d.jsx)("div",{className:"col-md-6"})]}),(null===e||void 0===e?void 0:e.doctor_question)&&(0,d.jsxs)("div",{className:"row",children:[(0,d.jsx)("div",{className:"col-md-6"}),(0,d.jsx)("div",{className:"col-md-6 text-right",children:(0,d.jsx)("h6",{className:" mt-2 rounded-pill ",children:(0,d.jsx)("span",{className:"color_blue_text px-3 py-1 mt-3 rounded-pill",children:null===e||void 0===e?void 0:e.doctor_question})})})]})]})}))}),(0,d.jsxs)("div",{className:"col-md-12 bg-white py-2 input_bottom d-flex",children:[(0,d.jsx)("input",{className:"form-control new_place_holder",value:h,onChange:function(e){return m(e.target.value)},placeholder:"Enter message here"}),(0,d.jsx)("button",{className:"btn btn-primary ml-2",onClick:T,children:!1===k?(0,d.jsx)("i",{class:"fas fa-paper-plane"}):(0,d.jsx)("div",{className:"spinner-grow spinner-grow-sm",role:"status",children:(0,d.jsx)("span",{className:"visually-hidden",children:"Loading..."})})})]})]})})})}},5861:function(e,t,n){function a(e,t,n,a,s,r,o){try{var c=e[r](o),l=c.value}catch(i){return void n(i)}c.done?t(l):Promise.resolve(l).then(a,s)}function s(e){return function(){var t=this,n=arguments;return new Promise((function(s,r){var o=e.apply(t,n);function c(e){a(o,s,r,c,l,"next",e)}function l(e){a(o,s,r,c,l,"throw",e)}c(void 0)}))}}n.d(t,{Z:function(){return s}})}}]);
//# sourceMappingURL=105.765bbc24.chunk.js.map